---
const steps = [
  {
    number: "01",
    title: "Inspiracja",
    description: "Opisz słowami, powiedz głosem lub pokaż zdjęcie wymarzonej fryzury",
    icon: "lightbulb",
  },
  {
    number: "02",
    title: "Selfie",
    description: "Zrób zdjęcie lub wybierz ze swojej galerii",
    icon: "camera",
  },
  {
    number: "03",
    title: "Generuj",
    description: "AI stworzy realistyczną wizualizację w kilka sekund",
    icon: "wand",
  },
];

const icons: Record<string, string> = {
  lightbulb: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-10 h-10 text-primary"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>`,
  camera: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-10 h-10 text-primary"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>`,
  wand: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-10 h-10 text-primary"><path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"/><path d="m14 7 3 3"/><path d="M5 6v4"/><path d="M19 14v4"/><path d="M10 2v2"/><path d="M7 8H3"/><path d="M21 16h-4"/><path d="M11 3H9"/></svg>`,
};
---

<section id="jak-to-dziala" class="py-20 md:py-32 relative">
  <div class="absolute top-1/2 left-0 w-full h-px bg-gradient-to-r from-transparent via-border to-transparent"></div>

  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-foreground mb-4">
        Jak to działa?
      </h2>
      <p class="text-lg text-muted-foreground max-w-2xl mx-auto">
        Trzy proste kroki do zobaczenia nowej fryzury
      </p>
    </div>

    <div class="grid md:grid-cols-3 gap-8 md:gap-12 max-w-5xl mx-auto">
      {steps.map((step, index) => (
        <div class="relative group">
          <!-- Connector line -->
          {index < steps.length - 1 && (
            <div class="hidden md:block absolute top-16 left-[60%] w-[calc(100%-20%)] h-px bg-gradient-to-r from-primary/50 to-transparent"></div>
          )}

          <div class="flex flex-col items-center text-center">
            <!-- Icon container -->
            <div class="relative mb-6">
              <div class="w-24 h-24 rounded-2xl bg-gradient-to-br from-primary/20 to-accent/10 border border-primary/30 flex items-center justify-center group-hover:scale-105 transition-transform">
                <Fragment set:html={icons[step.icon]} />
              </div>
              <div class="absolute -top-2 -right-2 w-8 h-8 rounded-full bg-primary flex items-center justify-center text-sm font-bold text-primary-foreground">
                {step.number.split("")[1]}
              </div>
            </div>

            <h3 class="text-xl font-semibold text-foreground mb-3">
              {step.title}
            </h3>
            <p class="text-muted-foreground leading-relaxed">
              {step.description}
            </p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
